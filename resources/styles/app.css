@import 'tailwindcss/base';
@import 'tailwindcss/components';
@import 'tailwindcss/utilities';

@layer base {
    :root {
        --theme-r1: 247;
        --theme-g1: 140;
        --theme-b1: 169;

        --threshold: 0.5;

        --r1: calc(var(--theme-r1) * 0.2126);
        --g1: calc(var(--theme-g1) * 0.7152);
        --b1: calc(var(--theme-b1) * 0.0722);
        --perceived-lightness1: calc((var(--r1) + var(--g1) + var(--b1)) / 255);

        /* --color-primary: rgb(var(--theme-r1), var(--theme-g1), var(--theme-b1)) !important; */
        --theme-text-color: hsl(0, 0%, calc((var(--perceived-lightness1) - var(--threshold)) * -10000000%));
        --theme-color-primary: var(--theme-r1) var(--theme-g1) var(--theme-b1);

        --color-secondary: 111 114 185;

        --fg-color-primary: 27 27 27;
        --fg-color-secondary: 85 85 85;
        --fg-color-tertiary: 136 136 136;

        --bg-color-primary: 255 255 255;
        --bg-color-secondary: 249 249 251;
        --bg-color-tertiary: 255 255 255;

        --bg-color-trans-l: rgba(255, 255, 255, .6);
        --bg-color-trans-m: rgba(255, 255, 255, .8);
        --bg-color-trans-d: rgba(255, 255, 255, .95);


        --main-body-width: 1000px;

        --image-placeholder: url("data:image/svg+xml,%3Csvg width='80px' height='80px' xmlns='http://www.w3.org/2000/svg' viewBox='-200 -200 500 500' preserveAspectRatio='xMidYMid' class='lds-stripe' style='background: rgb(254, 250, 199) none repeat scroll 0%25 0%25;'%3E%3Cdefs%3E%3Cpattern id='blah' patternUnits='userSpaceOnUse' x='0' y='0' width='100' height='100'%3E%3Cg transform='translate(7.8 0)'%3E%3Cg transform='rotate(20 50 50) scale(1.2)'%3E%3Crect x='-20' y='-10' width='10' height='120' ng-attr-fill='%7B%7Bconfig.c1%7D%7D' fill='orange'%3E%3C/rect%3E%3Crect x='-10' y='-10' width='10' height='120' ng-attr-fill='%7B%7Bconfig.c2%7D%7D' fill='%23ffffcb'%3E%3C/rect%3E%3Crect x='0' y='-10' width='10' height='120' ng-attr-fill='%7B%7Bconfig.c1%7D%7D' fill='orange'%3E%3C/rect%3E%3Crect x='10' y='-10' width='10' height='120' ng-attr-fill='%7B%7Bconfig.c2%7D%7D' fill='%23ffffcb'%3E%3C/rect%3E%3Crect x='20' y='-10' width='10' height='120' ng-attr-fill='%7B%7Bconfig.c1%7D%7D' fill='orange'%3E%3C/rect%3E%3Crect x='30' y='-10' width='10' height='120' ng-attr-fill='%7B%7Bconfig.c2%7D%7D' fill='%23ffffcb'%3E%3C/rect%3E%3Crect x='40' y='-10' width='10' height='120' ng-attr-fill='%7B%7Bconfig.c1%7D%7D' fill='orange'%3E%3C/rect%3E%3Crect x='50' y='-10' width='10' height='120' ng-attr-fill='%7B%7Bconfig.c2%7D%7D' fill='%23ffffcb'%3E%3C/rect%3E%3Crect x='60' y='-10' width='10' height='120' ng-attr-fill='%7B%7Bconfig.c1%7D%7D' fill='orange'%3E%3C/rect%3E%3Crect x='70' y='-10' width='10' height='120' ng-attr-fill='%7B%7Bconfig.c2%7D%7D' fill='%23ffffcb'%3E%3C/rect%3E%3Crect x='80' y='-10' width='10' height='120' ng-attr-fill='%7B%7Bconfig.c1%7D%7D' fill='orange'%3E%3C/rect%3E%3Crect x='90' y='-10' width='10' height='120' ng-attr-fill='%7B%7Bconfig.c2%7D%7D' fill='%23ffffcb'%3E%3C/rect%3E%3Crect x='100' y='-10' width='10' height='120' ng-attr-fill='%7B%7Bconfig.c1%7D%7D' fill='orange'%3E%3C/rect%3E%3Crect x='110' y='-10' width='10' height='120' ng-attr-fill='%7B%7Bconfig.c1%7D%7D' fill='orange'%3E%3C/rect%3E%3C/g%3E%3CanimateTransform attributeName='transform' type='translate' values='0 0;26 0' keyTimes='0;1' ng-attr-dur='%7B%7Bconfig.speed%7D%7Ds' repeatCount='indefinite' dur='1s'%3E%3C/animateTransform%3E%3C/g%3E%3C/pattern%3E%3C/defs%3E%3Crect ng-attr-rx='%7B%7Bconfig.r%7D%7D' ng-attr-ry='%7B%7Bconfig.r%7D%7D' ng-attr-x='%7B%7Bconfig.x%7D%7D' ng-attr-y='%7B%7Bconfig.y%7D%7D' ng-attr-stroke='%7B%7Bconfig.stroke%7D%7D' ng-attr-stroke-width='%7B%7Bconfig.strokeWidth%7D%7D' ng-attr-width='%7B%7Bconfig.width%7D%7D' ng-attr-height='%7B%7Bconfig.height%7D%7D' fill='url(%23blah)' rx='15' ry='15' x='5' y='36' stroke='orange' stroke-width='5' width='90' height='28'%3E%3C/rect%3E%3C/svg%3E");
        --image-rainbow: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100%25' height='100%25' viewBox='0 0 1200 800'%3E%3Cdefs%3E%3CradialGradient id='a' cx='0' cy='800' r='800' gradientUnits='userSpaceOnUse'%3E%3Cstop offset='0' stop-color='%23ff8000'/%3E%3Cstop offset='1' stop-color='%23ff8000' stop-opacity='0'/%3E%3C/radialGradient%3E%3CradialGradient id='b' cx='1200' cy='800' r='800' gradientUnits='userSpaceOnUse'%3E%3Cstop offset='0' stop-color='%2300ff19'/%3E%3Cstop offset='1' stop-color='%2300ff19' stop-opacity='0'/%3E%3C/radialGradient%3E%3CradialGradient id='c' cx='600' cy='0' r='600' gradientUnits='userSpaceOnUse'%3E%3Cstop offset='0' stop-color='%239900ff'/%3E%3Cstop offset='1' stop-color='%239900ff' stop-opacity='0'/%3E%3C/radialGradient%3E%3CradialGradient id='d' cx='600' cy='800' r='600' gradientUnits='userSpaceOnUse'%3E%3Cstop offset='0' stop-color='%23ffff00'/%3E%3Cstop offset='1' stop-color='%23ffff00' stop-opacity='0'/%3E%3C/radialGradient%3E%3CradialGradient id='e' cx='0' cy='0' r='800' gradientUnits='userSpaceOnUse'%3E%3Cstop offset='0' stop-color='%23FF0000'/%3E%3Cstop offset='1' stop-color='%23FF0000' stop-opacity='0'/%3E%3C/radialGradient%3E%3CradialGradient id='f' cx='1200' cy='0' r='800' gradientUnits='userSpaceOnUse'%3E%3Cstop offset='0' stop-color='%230CF'/%3E%3Cstop offset='1' stop-color='%230CF' stop-opacity='0'/%3E%3C/radialGradient%3E%3C/defs%3E%3Crect fill='url(%23a)' width='1200' height='800'/%3E%3Crect fill='url(%23b)' width='1200' height='800'/%3E%3Crect fill='url(%23c)' width='1200' height='800'/%3E%3Crect fill='url(%23d)' width='1200' height='800'/%3E%3Crect fill='url(%23e)' width='1200' height='800'/%3E%3Crect fill='url(%23f)' width='1200' height='800'/%3E%3C/svg%3E");
        /* ... */
    }

    :root {
        @apply text-fg-primary;
    }

    img:not([src]) {
        /* hide the 1px outline before image loading */
        clip-path: inset(1px);
     }
}

/* bubble popup */
@layer components {
    .bubble-basic {
        @apply absolute border-transparent
    }

    .bubble-top {
        @apply bubble-basic border-[10px] border-b-black/50;
        bottom: calc(100% - 1px);
    }

    .bubble-bottom {
        @apply bubble-basic border-[10px] border-t-black/50;
        top: calc(100% - 1px);
    }
}

/* paper container */
@layer components {
    .letter {
        background: #fff;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
        margin: 26px auto;
        /* max-width: 550px; */
        /* min-height: 300px; */
        /* padding: 24px; */
        position: relative;
        width: 95%;

        display: flex;
        flex-direction: column;
        align-items: center;
    }

    .letter:before,
    .letter:after {
        content: "";
        height: 98%;
        position: absolute;
        width: 100%;
        z-index: -1;
    }

    .letter:before {
        background: #fafafa;
        box-shadow: 0 0 8px rgba(0, 0, 0, 0.2);
        left: -5px;
        top: 4px;
        transform: rotate(-2.5deg);
    }

    .letter:after {
        background: #f6f6f6;
        box-shadow: 0 0 3px rgba(0, 0, 0, 0.2);
        right: -3px;
        top: 1px;
        transform: rotate(1.4deg);
    }

    .under-deco {
        position: relative;
    }

    .under-deco::after {
        position: absolute;
        content: '';
        bottom: -12px;
        left: 0;
        right: 0;
        width: 80%;
        height: 2px;
        margin: auto;
        background-color: #000;
    }
}

@layer components {
    .flex-gallery {
        display: flex;
        overflow-anchor: none;
        /* for only child vertically expanding */
        justify-content: center;
        align-items: stretch;
        gap: 1rem;

        padding: 0 20px;
        margin: auto;
        overflow: hidden;
        transform: skew(5deg);
        width: 100%;
    }

    .flex-gallery .g-card {
        flex: 1 1 4rem;
        transition: all 1s ease-in-out;
        height: 100%;
        max-width: 100%;
        position: relative;
        overflow: hidden;
    }

    .flex-gallery .g-card .g-title {
        color: black;
        background: rgb(254 252 232 / 75%);
        padding: 0.5rem;
        min-width: 300px;
        position: absolute;
        bottom: 0;

        transform: rotate(-90deg);
        transform-origin: 0% 0%;

        transition-property: transform, background, min-width;
        transition-duration: 0.5s;
        transition-timing-function: ease-in-out;

        white-space: nowrap;
    }

    .flex-gallery .g-card:hover {
        /* flex-grow: 10; */
        flex-basis: 50%;
    }

    .flex-gallery .g-card:hover .g-title {
        min-width: 100%;
        color: white;
        background: rgb(var(--theme-r1) var(--theme-g1) var(--theme-b1) / 50%);
        font-size: 2rem;
        box-sizing: content-box;
        transform: rotate(0deg) skew(-5deg);
    }

    .flex-gallery .g-card img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: filter 1s ease-in-out;
    }

    .flex-gallery .g-card:not(:hover) img {
        filter: grayscale(30%);
    }

    /* 
    .flex-gallery>*:not(:last-child) {
        margin-right: 1rem;
    } */

    .flex-gallery>div:only-of-type:not(:hover) {
        /* max-width: 50%; */
        flex-basis: 50%;
        flex-grow: 0;
    }
}

@layer components {

    .button-basic {
        @apply flex items-center justify-center cursor-pointer;
    }

    .button-round {
        @apply aspect-square rounded-full button-basic;
    }

    .btn-theme-primary {
        @apply text-theme-fg-primary bg-theme-primary transition;
    }

    .btn-theme-primary:hover {
        @apply contrast-75;
    }

    .btn-contrast {
        @apply backdrop-contrast-75;
    }

    .btn-contrast:hover {
        @apply backdrop-contrast-50;
    }

    .button-theme-solid {
        @apply py-3 px-8 font-bold rounded-full shadow-md btn-theme-primary;
    }

}

@layer components {
    :root.dark .dark-toggle>*:nth-child(1) {
        display: none;
    }

    :root:not(.dark) .dark-toggle>*:nth-child(2) {
        display: none;
    }
}

/* image realted */
@layer components {
    .img-placeholder {
        background-repeat: no-repeat;
        background-size: cover;
        background-position: center center;
        background-origin: border-box;
        background-image: var(--image-placeholder);
    }

    .img-fallback {
        position: relative;
    }

    .img-fallback::after {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        font-size: 1.2em;
        line-height: 3;
        text-align: center;
        content: attr(alt);
    }

    .img-fallback.rainbow::after {
        /* color: white; */
        background: white;
        background-image: var(--image-rainbow);
        background-size: cover;
        background-position: center;
    }
}

/* some relative/component selections
 * not resuable, but keep for reducing the complexity 
 */
@layer components {
    .search-panel>:first-child {
        @apply max-w-2xl flex-1 my-16 mx-auto py-3 px-6;
    }
}

@layer components {



    .comments .comment-reply-title {
        @apply my-6 font-bold text-lg;
    }

    .comment-form .form-submit {
        @apply my-4;
    }

    .comment-form .submit {
        @apply w-full border border-slate-200 rounded px-6 py-3 text-sm cursor-pointer transition-colors;
    }

    .comment-form .submit:hover {
        @apply border-theme-primary text-theme-primary;
    }


    .nova-comment a {
        @apply transition-filter;
    }

    .nova-comment a:hover {
        @apply !contrast-150;
    }


    .nova-comment .content {
        @apply p-5 pb-px;
    }

    .nova-comment .content:hover {
        @apply backdrop-contrast-[0.95];
    }

    .nova-comment .main {
        @apply grid grid-rows-2 gap-2.5 items-center;
        grid-template-columns: auto 1fr auto;
    }


    .nova-comment .profile {
        @apply row-start-1 row-span-2 col-start-1 -sm:row-span-1;
        @apply w-10 h-10 rounded-full overflow-hidden -sm:w-5 -sm:h-5 -sm:rounded-sm;
    }


    .nova-comment .author {
        @apply row-start-1 col-start-2;
    }

    .nova-comment .author .name {
        @apply text-theme-primary font-bold contrast-75;
    }

    .nova-comment .author .tag {
        @apply border border-solid inline-block rounded-sm;
        @apply border-pink-400 text-pink-400 font-normal text-xs;
    }


    .nova-comment .info {
        @apply row-start-2 col-start-2 -sm:col-start-1 -sm:col-span-2;
        @apply text-xs text-fg-tertiary;
    }

    .nova-comment .info>*:not(:last-child) {
        @apply mr-2;
    }

    .nova-comment .info .useragent-info img {
        @apply w-3.5 h-3.5 align-sub;
    }

    .nova-comment .info .useragent-info span {
        @apply mx-1;
    }


    .nova-comment .comment-reply-link {
        @apply row-start-1 row-span-2 col-start-3 transition-opacity duration-200;
        @apply text-xs uppercase py-1 px-1.5 rounded-sm;
        @apply bg-theme-primary text-theme-fg-primary opacity-0;
    }

    .nova-comment .content:hover .comment-reply-link {
        @apply opacity-100;
    }


    .nova-comment .body {
        @apply my-5 text-fg-secondary;
    }

    .nova-comment .body .comment-at {
        @apply font-bold no-underline text-rose-500;
    }

    .nova-comment .body p {
        @apply text-sm my-4;
    }

    .nova-comment .body p a {
        @apply px-1 text-theme-primary underline contrast-75 decoration-dotted;
    }

    .nova-comment .children {
        @apply pl-6 border-l-2 border-solid border-zinc-400 border-opacity-20;
    }
}

@layer utilities {
    .text-shadow {
        text-shadow: -1px -1px 0 #fff, 1px -1px 0 #fff, -1px 1px 0 #fff, 1px 1px 0 #fff;
    }

    .writing-v-rl {
        writing-mode: vertical-rl;
    }

    .-webkit-ellipsis {
        display: -webkit-box;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    .-webkit-ellipsis-1 {
        @apply -webkit-ellipsis;
        -webkit-line-clamp: 1;
    }

    .-webkit-ellipsis-2 {
        @apply -webkit-ellipsis;
        -webkit-line-clamp: 2;
    }

    .-webkit-ellipsis-3 {
        @apply -webkit-ellipsis;
        -webkit-line-clamp: 3;
    }
}


/* wordpress screen reader text */
.screen-reader-text {
    border: 0;
    clip: rect(1px, 1px, 1px, 1px);
    clip-path: inset(50%);
    height: 1px;
    margin: -1px;
    overflow: hidden;
    padding: 0;
    position: absolute;
    width: 1px;
    word-wrap: normal !important;
}